# 垂直スライス型モジュラーモノリス

## 基本概念

垂直スライス型モジュラーモノリスは、機能（ドメイン）ごとにバックエンドとフロントエンドを縦に分割する設計パターンです。各スライスは特定の機能（例：認証、投稿、ユーザー管理など）に責任を持ち、そのドメイン内の処理を完結します。

## ディレクトリ構造

### バックエンド (Flask)

```
app/backend/
  ├── app.py                # アプリケーションのエントリーポイント
  ├── wsgi.py               # 本番環境用のWSGIエントリーポイント
  ├── requirements.txt      # 依存パッケージリスト
  └── app/
      ├── app.py            # Flaskアプリ設定
      ├── config/           # 環境別の設定ファイル
      ├── core/             # 共通のコア機能
      │   ├── __init__.py
      │   ├── database.py   # DB接続やセッション管理
      │   ├── security.py   # セキュリティ関連
      │   └── errors.py     # エラーハンドリング
      │
      ├── modules/          # 機能ドメインごとのモジュール
      │   ├── __init__.py   # モジュール登録
      │   │
      │   ├── auth/         # 認証モジュール
      │   │   ├── __init__.py
      │   │   ├── routes.py # エンドポイント定義
      │   │   ├── models.py # DBモデル
      │   │   ├── schemas.py # バリデーションスキーマ
      │   │   └── services.py # ビジネスロジック
      │   │
      │   ├── posts/        # 投稿モジュール
      │   │   ├── __init__.py
      │   │   ├── routes.py
      │   │   ├── models.py
      │   │   ├── schemas.py
      │   │   └── services.py
      │   │
      │   ├── users/        # ユーザーモジュール
      │   │   ├── __init__.py
      │   │   ├── routes.py
      │   │   ├── models.py
      │   │   ├── schemas.py
      │   │   └── services.py
      │   │
      │   └── articles/     # 技術記事モジュール
      │       ├── __init__.py
      │       ├── routes.py
      │       ├── models.py
      │       ├── schemas.py
      │       └── services.py
      │
      └── common/           # 共通ユーティリティ
```

### フロントエンド (React + TypeScript)

```
app/frontend/
  └── src/
      ├── main.tsx         # Reactアプリケーションのエントリーポイント
      ├── App.tsx          # ルートコンポーネント
      ├── routes.tsx       # ルーティング設定
      │
      ├── api/             # APIクライアントレイヤー
      │
      ├── components/      # 共通コンポーネント
      │
      └── features/        # 機能モジュール
          │
          ├── auth/        # 認証機能
          │   ├── pages/   # ページコンポーネント
          │   ├── components/ # 機能固有コンポーネント
          │   └── hooks/   # 機能固有フック
          │
          ├── feed/        # フィード（投稿）機能
          │   ├── pages/
          │   ├── components/
          │   └── hooks/
          │
          ├── users/       # ユーザー・プロフィール機能
          │   ├── pages/
          │   ├── components/
          │   └── hooks/
          │
          └── articles/    # 技術記事機能
              ├── pages/
              ├── components/
              └── hooks/
```

## メリット

1. **関心の分離**: 機能ごとにコードが分かれるため、変更の影響範囲が限定的
2. **独立したチーム開発**: 各機能を異なるチームが担当できる
3. **コードの発見性**: 特定機能のコードを見つけやすい
4. **部分的なデプロイ**: 理論的には機能ごとのデプロイも可能
5. **明確な責任境界**: 各モジュールの責任範囲が明確

## デメリット

1. **共通コードの管理**: 重複コードが発生しやすい
2. **モジュール間の連携**: モジュール間で連携が必要な機能の実装が複雑になりうる
3. **一貫性の維持**: 各モジュールで実装スタイルが異なる可能性

## 適した状況

- 機能が明確に分かれている中〜大規模アプリケーション
- 機能ごとに異なるチームが開発する場合
- 将来的にマイクロサービスへの移行の可能性がある場合
