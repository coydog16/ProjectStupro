# navStupro 開発進捗レポート

## 1. 概要

このドキュメントは、navStupro（ナブスタプロ）アプリケーションの開発進捗と、作成したファイルの概要をまとめたものです。navStupro は、社内の学習進捗を共有・可視化するSNS型アプリケーションで、Flask (バックエンド) と React/TypeScript (フロントエンド) を使用し、PostgreSQLをデータベースとして実装しています。

## 2. プロジェクト構成

プロジェクトは以下のような構造で構成されています：

- **バックエンド**: Flask + SQLAlchemy + PostgreSQL
- **フロントエンド**: React + TypeScript
- **データベース**: PostgreSQL
- **認証**: Flask-Login を使用したセッションベース認証

## 3. 実装済み機能

### 3.1 バックエンド

- **ユーザー認証**: 登録・ログイン・ログアウト機能
- **トピック管理**: 学習トピックのCRUD操作
- **投稿機能**: 一般投稿・ブログ投稿のCRUD操作
- **コメント機能**: 投稿に対するコメントとリプライ
- **スキル管理**: ユーザースキルの登録と管理
- **画像アップロード**: プロフィール画像や投稿画像の管理

### 3.2 フロントエンド

- **認証画面**: ログイン・登録フォーム
- **ホーム画面**: メインフィード表示
- **トピック管理**: 学習トピックの一覧・詳細・作成画面
- **プロフィール画面**: ユーザープロフィール表示・編集
- **API連携**: バックエンドAPIとの連携サービス

## 4. 作成したファイル

### 4.1 ドキュメント

| ファイル名 | 説明 |
|------------|------|
| `/docs/requirements_definition.md` | アプリケーションの詳細な要件定義（目的、機能要件、非機能要件など） |
| `/docs/database_design.md` | データベースのテーブル設計（テーブル定義、関連、インデックスなど） |
| `/docs/implementation_progress.md` | 開発進捗レポート（本ドキュメント） |

### 4.2 バックエンドモデル

| ファイル名 | 説明 |
|------------|------|
| `/app/backend/app/models/user.py` | ユーザーモデル（認証、プロフィール情報） |
| `/app/backend/app/models/topic.py` | 学習トピックモデル（学習内容、進捗管理） |
| `/app/backend/app/models/post.py` | 投稿モデル（短文投稿、ブログ、コメント） |
| `/app/backend/app/models/image.py` | 画像モデル（プロフィール画像、投稿画像） |
| `/app/backend/app/models/skill.py` | スキルモデル（技術スキル、ユーザースキル） |
| `/app/backend/app/models/__init__.py` | モデルの初期化・インポート |

### 4.3 バックエンドAPI

| ファイル名 | 説明 |
|------------|------|
| `/app/backend/app/routes/auth.py` | 認証関連のルート（ログイン・登録など） |
| `/app/backend/app/routes/topic.py` | トピック関連のAPI（CRUD操作） |
| `/app/backend/app/routes/user.py` | ユーザープロフィール関連のAPI（プロフィール取得・更新、アバターなど） |
| `/app/backend/app/routes/post.py` | 投稿関連のAPI（投稿作成、コメント、画像など） |
| `/app/backend/app/routes/__init__.py` | ルートの初期化・登録 |

### 4.4 フロントエンドサービス

| ファイル名 | 説明 |
|------------|------|
| `/app/frontend/src/services/api.ts` | 基本APIクライアント（認証、トピック） |
| `/app/frontend/src/services/userApi.ts` | ユーザー関連のAPIサービス（プロフィール、スキルなど） |
| `/app/frontend/src/services/postApi.ts` | 投稿関連のAPIサービス（投稿、コメント、画像など） |
| `/app/frontend/src/services/skillApi.ts` | スキル関連のAPIサービス（スキル検索、習熟度） |

### 4.5 ユーティリティ

| ファイル名 | 説明 |
|------------|------|
| `/app/backend/manage.py` | データベース管理スクリプト（マイグレーション、テストデータ作成） |
| `/app/backend/setup_db.sh` | データベースセットアップスクリプト（マイグレーション実行、初期化） |

## 5. 実装されたデータベースモデル

### 5.1 主要なテーブル

1. **users**: ユーザー情報管理
2. **topics**: 学習トピック管理
3. **posts**: 投稿情報管理
4. **blog_posts**: ブログ形式の長文投稿
5. **comments**: コメント情報
6. **skills**: スキル情報
7. **user_skills**: ユーザーとスキルの関連
8. **images**: 画像情報

### 5.2 リレーションシップテーブル

1. **post_skills**: 投稿とスキルの関連
2. **post_images**: 投稿と画像の関連
3. **user_follows**: ユーザーのフォロー関係

## 6. 使い方

### 6.1 データベースセットアップ

1. バックエンドディレクトリに移動
   ```bash
   cd /home/coydog16/flask/navStupro/app/backend
   ```

2. データベースセットアップスクリプトを実行
   ```bash
   ./setup_db.sh
   ```
   
3. プロンプトに従ってテストデータを作成（オプション）

### 6.2 バックエンド起動

```bash
cd /home/coydog16/flask/navStupro/app/backend
flask run
```

### 6.3 フロントエンド起動

```bash
cd /home/coydog16/flask/navStupro/app/frontend
npm install
npm start
```

## 7. 次のステップ

1. **フロントエンド画面の実装**:
   - 投稿フィード表示
   - ユーザープロフィール編集
   - スキル管理画面
   - ブログエディタ

2. **バックエンド機能の追加**:
   - いいね機能の実装
   - 通知システムの実装
   - 検索機能の強化

3. **デプロイ準備**:
   - Dockerコンテナ設定の調整
   - 本番環境設定

## 8. ファイル機能詳細

### 8.1 バックエンドモデル

#### User モデル (`user.py`)
ユーザー情報を管理するモデルで、認証機能とプロフィール情報を持ちます。以下のような機能を提供します：

- パスワードのハッシュ化と検証
- プロフィール情報の管理（名前、部署、役職など）
- フォロー関係の管理
- アバター画像との関連付け
- スキルセットとの関連付け

#### Topic モデル (`topic.py`)
学習トピックを管理するモデルで、以下の機能を提供します：

- トピックの基本情報（タイトル、説明など）
- 進捗状況の管理（進捗率、ステータスなど）
- 優先度や想定学習時間の管理
- JSONフォーマットのノート保存

#### Post モデル (`post.py`)
投稿情報を管理するモデルで、短文投稿からブログ投稿まで対応します：

- 一般投稿の管理
- ブログ投稿の拡張機能（マークダウン対応）
- コメントとリプライの管理
- いいね数のカウント

#### Image モデル (`image.py`)
画像情報を管理するモデルで、プロフィール画像や投稿画像を扱います：

- 画像ファイル情報の保存
- 画像タイプの区別（アバター、投稿画像など）
- 画像メタデータの管理

#### Skill モデル (`skill.py`)
スキル情報とユーザースキルの関連を管理するモデルです：

- スキル基本情報の管理
- ユーザーの習熟度や経験年数の管理
- 投稿とスキルの関連付け

### 8.2 バックエンドAPI

#### ユーザー関連API (`user.py`)
ユーザープロフィール関連のAPIエンドポイントを提供します：

- プロフィール情報の取得・更新
- アバター画像のアップロード
- スキルセットの管理（追加・更新・削除）

#### 投稿関連API (`post.py`)
投稿やコメント関連のAPIエンドポイントを提供します：

- 投稿の作成・取得・更新・削除
- コメントの作成・取得
- 投稿画像のアップロード
- ブログ投稿の特殊処理

### 8.3 フロントエンドサービス

#### ユーザーAPIサービス (`userApi.ts`)
ユーザー関連のAPIを呼び出すためのサービスです：

- プロフィール情報の取得・更新
- アバター画像のアップロード
- スキルセットの管理

#### 投稿APIサービス (`postApi.ts`)
投稿関連のAPIを呼び出すためのサービスです：

- 投稿の作成・取得・更新・削除
- コメントの作成・取得
- 投稿画像のアップロード

#### スキルAPIサービス (`skillApi.ts`)
スキル関連のAPIを呼び出すためのサービスです：

- スキル一覧の取得
- スキル検索
- 習熟度表示のヘルパー関数

## 9. 結論

navStupro アプリケーションは、バックエンドの主要な機能とフロントエンドのAPI連携部分が実装されました。データベース設計は詳細に行われ、必要なモデル、API、サービスが作成されています。次のステップはフロントエンドの各画面実装と、残りの機能の実装を進めることです。
